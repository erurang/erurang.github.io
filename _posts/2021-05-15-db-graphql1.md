---
layout: post
title:  "GraphQL이 생긴 이유"
subtitle: "GraphQL이 생긴 이유"
categories: db
tags: graphql
comments: true

---

### GraphQL에 대해 알아보자.

GraphQL은 무언인가? 기존 REST 형식보다 **효율적**이고 **강력**하며 유연한 대안을 제공하는 새로운 **표준API**이다. 라고 나와있다.

API는 클라이언트가 서버에서 데이터를 로드하는 방식중 하나이다. 그럼 어떻게 만들었길래 더 좋은걸까? 아래의 예시로 차이를 느껴보자.

### 기존의 Rest 방식

특정 유저id에 대한 정보, 해당 유저가 쓴 글들 , 해당 유저의 팔로워들의 정보가 필요하다고 가정해보자.

![스크린샷 2021-05-15 오후 8 30 51](https://user-images.githubusercontent.com/56789064/118359036-72d56980-b5bc-11eb-89ea-8bac59e90957.png)


그럼 우리는 총 3번의 요청을 서버에 해야한다. 위의 방식에서 문제는 무엇일까? 

우리는 사용자 이름의 리스트만 필요한데, 우리가 user로 요청을 했을때 user에 사용자 정보뿐아니라 생일,가입일,이메일.. 등등이 user라는 요청에 응답한다면?

우리는 우리가 사용하는 정보에 비해서 너무나 많은 JSON을 받아오게 된다. 이것을 우리는 **Over-fetching**이라 표현한다.

또한 우리의 앱에서 특정 최근 사용자 3명을 나타내야 하는 경우를 가정해보자. 그러면 우리는 이 특정 3명의 정보를 얻기위해서 `user/id/`요청을 api에 3번을 또 요청해야한다.

이것을 우리는 **under-fetching**이라고 표현한다.

### 이것을 GraphQL에서는 어떻게 해결하였나?

![스크린샷 2021-05-15 오후 8 36 30](https://user-images.githubusercontent.com/56789064/118359171-3c4c1e80-b5bd-11eb-90ec-c5c93459b645.png)

단일 쿼리를 **POST**요청으로 **GraphQL**서버에 요청하여 원하는 정보만 받아오도록 하였다. 즉 네크워크를 통해 전송하는 데이터의 양을 최소화시켰다고 할수있다.

오버페칭 과 언더페칭 둘다 한번의 쿼리 요청으로 해결이 가능한것을 알수있다.

우리가 GraphQL을 사용하기위해서는 API를 GraphQL식으로 해석할수있도록 resolver와 schema가 필요하다. 